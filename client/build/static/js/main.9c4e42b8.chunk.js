(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],[,,,,,,,,function(e,t,a){e.exports={button:"custom-button_button__2FLF3",active:"custom-button_active__3hscQ"}},,,,function(e,t,a){e.exports={searchForm:"search-form_searchForm__3_XBN"}},function(e,t,a){e.exports={input:"input_input__yvQio"}},function(e,t,a){e.exports={imageContainer:"image-container_imageContainer__bJMXv"}},function(e,t,a){e.exports={img:"custom-image_img__1U9M1"}},,function(e,t,a){e.exports=a(25)},,,,,function(e,t,a){},,function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),s=a.n(c),i=(a(22),a(1)),l=a.n(i),o=a(9),u=a(2),h=a(3),m=a(4),g=a(5),d=a(7),p=a(6),f=(a(24),a(12)),b=a.n(f),v=a(16),x=a(13),j=a.n(x),E=function(e){var t=e.searchText,a=e.handleChange,n=Object(v.a)(e,["searchText","handleChange"]);return r.a.createElement("input",Object.assign({className:j.a.input,type:"search",value:t,onChange:a},n))},S=a(8),_=a.n(S),y=function(e){var t=e.children,a=e.active,n=e.searching,c=e.handleSubmit;return r.a.createElement("button",{className:"".concat(_.a.button," ").concat(a&&!n?_.a.active:""),onClick:a?c:function(){}},n?"wait...":t)},O=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={searchText:"",searching:!1,searched:!1,resultText:""},e.handleChange=function(t){e.setState({searchText:t.target.value})},e.handleSubmit=function(){var t=Object(u.a)(l.a.mark((function t(a){var n,r,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),e.setState((function(e){return{searching:!0,searched:!0,resultText:"'".concat(e.searchText,"' images")}})),n="https://image-buddy-baraja.herokuapp.com/api/search?q=".concat(e.state.searchText),t.prev=3,t.next=6,fetch(n);case 6:return r=t.sent,t.next=9,r.json();case 9:c=t.sent,e.setState({searching:!1}),e.props.loadImages(c),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(3),console.log(t.t0);case 17:case"end":return t.stop()}}),t,null,[[3,14]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(m.a)(a,[{key:"render",value:function(){var e=!!this.state.searchText.length;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:e?this.handleSubmit:function(e){e.preventDefault()},className:b.a.searchForm},r.a.createElement(E,{searchText:this.state.searchText,handleChange:this.handleChange,placeholder:"search any image..."}),r.a.createElement(y,{handleSubmit:this.handleSubmit,active:e,searching:this.state.searching},"Search")),this.state.searched?r.a.createElement("h2",{style:{margin:"10px 0"}},this.state.resultText):"")}}]),a}(r.a.Component),w=a(14),k=a.n(w),C=a(15),T=a.n(C),N=function(e){var t=Object.assign({},e);return r.a.createElement("img",Object.assign({},t,{className:T.a.img}))},I=function(e){var t=e.images,a=e.children;return r.a.createElement("div",{className:k.a.imageContainer},t?t.map((function(e,t){return r.a.createElement(N,{src:e,key:t})})):"",a)},U=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(h.a)(this,a),(e=t.call(this)).handleScroll=function(t){document.documentElement.scrollHeight-window.scrollY-window.innerHeight<100&&e.state.initialLoad&&!e.state.loading&&(console.log("handleScroll"),e.setState({loading:!0}),e.loadNextImages())},e.loadImages=function(t){t.err||e.setState((function(e){return{data:t,initialLoad:!0,page:2}}))},e.loadNextImages=Object(u.a)(l.a.mark((function t(){var a,n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("loadnexttimages()"),a="https://image-buddy-baraja.herokuapp.com/api/page/".concat(e.state.page),t.prev=2,t.next=5,fetch(a);case 5:return n=t.sent,t.next=8,n.json();case 8:(r=t.sent).imageUrls.length>0&&e.setState((function(e){return{page:e.page+1,data:{imageUrls:[].concat(Object(o.a)(e.data.imageUrls),Object(o.a)(r.imageUrls))},loading:!1}})),console.log("iamges",r),t.next=15;break;case 13:t.prev=13,t.t0=t.catch(2);case 15:case"end":return t.stop()}}),t,null,[[2,13]])}))),e.state={data:{imageUrls:[]},initialLoad:!1,page:1,loading:!1},e.handleScroll=e.handleScroll.bind(Object(g.a)(e)),window.addEventListener("scroll",e.handleScroll),e}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"Image Buddy"," ",r.a.createElement("small",{style:{fontSize:"0.5em"}},"By Baraja")),r.a.createElement(O,{loadImages:this.loadImages}),this.state.data.imageUrls.length>0?r.a.createElement(I,{images:this.state.data.imageUrls}):r.a.createElement(I,null,r.a.createElement(N,{src:"/search girl.png"})),this.state.loading?r.a.createElement("h3",{style:{textAlign:"center",margin:"10px 0"}},"Loading ..."):"")}}]),a}(r.a.Component);s.a.render(r.a.createElement(U,null),document.getElementById("root"))}],[[17,1,2]]]);
//# sourceMappingURL=main.9c4e42b8.chunk.js.map